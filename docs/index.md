<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [insertIntoDb][1]
-   [updateDocument][2]
-   [upsertDocument][3]
-   [findOneDocumentBasedOnQuery][4]
-   [findDocumentsBasedOnQuery][5]
-   [countDocumentsByQuery][6]
-   [workOnItPageByPage][7]
-   [connectDb][8]
-   [bulkCreate][9]
-   [bulkUpdate][10]
-   [registerForGracefulShutdown][11]
-   [insertOne][12]
-   [dropCollection][13]
-   [findDistinctDocuments][14]
-   [processABatchOfDocuments][15]
-   [bulkUpdateByQuery][16]

## insertIntoDb

Method to insert documents in a given collection

**Parameters**

-   `collectionName` **[string][17]** Name of the collection
-   `documents` **[array][18]** Array of documents that will be inserted.

Returns **[object][19]** A document with `acknowledged: true` and an array of successfully inserted \_id's

## updateDocument

Method to update a document in a given collection based on \_id.

**Parameters**

-   `collectionName` **[string][17]** Name of the collection
-   `mutableEntity` **[object][19]** Document to update in the collection
-   `timeStamp` **[boolean][20]** Default is false. If set to true it adds a key lastModifiedAt to the document with the current timestamp.

Returns **any** 

## upsertDocument

Method to upsert a document in a given collection

**Parameters**

-   `collectionName` **[string][17]** Name of the collection
-   `mutableEntity` **[object][19]** Properties that will be updated.
-   `upsert` **[boolean][20]** Default is false, if set to true it will create or update the document with the given set of properties.
-   `query` **[object][19]** Default is querying by \_id but a custom query can be specified.

Returns **any** 

## findOneDocumentBasedOnQuery

Method to find one document based on a given query

**Parameters**

-   `collectionName` **[string][17]** Name of the collection
-   `query` **[object][19]** Query
-   `sort` **[object][19]** Sort, by default it sorts by \_id.

Returns **[object][19]** an document if a match is found based on the query.

## findDocumentsBasedOnQuery

Method to find documents based on query

**Parameters**

-   `collectionName` **[string][17]** Name of the collection
-   `query` **[object][19]** Query
-   `limit` **[number][21]** Limit to the query. By default there's no limit until specified.
-   `projection` **[object][19]** Query Projection

Returns **[array][18]** an array of documents based on the query.

## countDocumentsByQuery

Method to count documents based on query

**Parameters**

-   `collectionName` **[string][17]** Name of the collection
-   `query` **[object][19]** Query object

Returns **[number][21]** the count of documents based on a given query

## workOnItPageByPage

Method to work on a collection page by page. PageSize can be even 1. Ideal if you want to work in batches.
This method requires you to connect to the DB first by using connectDb(). \\n \\n
Assumptions:
  a) sorts will happen by `_id` in this method
  b) `query._id` is overriden by this method

**Parameters**

-   `db` **[object][19]** 
-   `collectionName` **[string][17]** Name of the collection
-   `query` **[object][19]** query object
-   `projection` **[object][19]** fields to project
-   `pageSize` **[number][21]** page size to return from the collection.
-   `processPage` **[function][22]** pass a function to handle the pagedResults
-   `processPageArgs` **[array][18]** additional arguments required by processPage

## connectDb

Method to connect to the db

Returns **[object][19]** db connection

## bulkCreate

Method to create documents in bulk in a given collection.

**Parameters**

-   `db` **[object][19]** 
-   `collectionName` **[string][17]** Name of the collection
-   `documents` **[array][18]** Array of documents to be created

Returns **any** 

## bulkUpdate

Method to update documents bulk in a given collection

**Parameters**

-   `db` **[object][19]** 
-   `collectionName` **[string][17]** Name of the collection
-   `updates` **[array][18]** array of documents to update
-   `omits` **[object][19]** Fields to omit while updating the documents in the collection

Returns **any** 

## registerForGracefulShutdown

Idea came from [https://medium.com/@gchudnov/trapping-signals-in-docker-containers-7a57fdda7d86][23]

**Parameters**

-   `shutdown` **any** the calling code user this method to control what actions to take as part of shutdown

## insertOne

Method to insert a single document.

**Parameters**

-   `collectionName` **[string][17]** name of the collection
-   `document` **[object][19]** document to insert

Returns **any** 

## dropCollection

Method to drop a collection

**Parameters**

-   `name` **[string][17]** name of the collection to drop.

Returns **any** 

## findDistinctDocuments

Method to find distinct documents in a collection

**Parameters**

-   `collectionName` **[string][17]** name of the collection
-   `field` **[string][17]** Distinct Field

Returns **[array][18]** an array of field values that are in the collection

## processABatchOfDocuments

Method to process a batch of documents in a collection

**Parameters**

-   `db`  db instance connection
-   `collectionName`  Name of the collection
-   `query`  Query on the basis of which documents will be picked from a collection.
-   `batchSize`  Size of the batch you'd want to process
-   `processBatch`  Function/method to run once desired docs are fetched from the DB.
-   `processBatchArgs`  Additional arguments that are required to be passed onto the processBatch method.

## bulkUpdateByQuery

Method to bulk update documents in a collection given a specific query.

**Parameters**

-   `db` **[object][19]** 
-   `collectionName` **[string][17]** Name of the collection
-   `updates` **[object][19]** Values that will be updated. Can update multiple values or set new values too.
-   `query` **[object][19]** Query to find the documents in the collection to update

Returns **[object][19]** 

[1]: #insertintodb

[2]: #updatedocument

[3]: #upsertdocument

[4]: #findonedocumentbasedonquery

[5]: #finddocumentsbasedonquery

[6]: #countdocumentsbyquery

[7]: #workonitpagebypage

[8]: #connectdb

[9]: #bulkcreate

[10]: #bulkupdate

[11]: #registerforgracefulshutdown

[12]: #insertone

[13]: #dropcollection

[14]: #finddistinctdocuments

[15]: #processabatchofdocuments

[16]: #bulkupdatebyquery

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[19]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[20]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[23]: https://medium.com/@gchudnov/trapping-signals-in-docker-containers-7a57fdda7d86
